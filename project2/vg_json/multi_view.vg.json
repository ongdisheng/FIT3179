{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "data": {
      "url": "../data/multi_view.csv"
    },
    "vconcat": [
      {
        "hconcat": [
          {
            "title": "Day 0 - 28",
            "width": 500,
            "height": 500,
            "transform": [
              {
                "filter": "datum.life_stage == 'day29_1'"
              }
            ],
            "layer": [
              {
                "mark": {
                  "type": "arc",
                  "innerRadius": 0,
                  "stroke": "black",
                  "cursor": "pointer"
                }
              }
            ],
            "encoding": {
              "theta": {
                "aggregate": "mean",
                "field": "deaths",
                "type": "quantitative",
                "stack": true
              },
              "radius": {
                "aggregate": "mean",
                "field": "deaths",
                "scale": {
                  "type": "sqrt",
                  "zero": true,
                  "rangeMin": 20
                }
              },
              "color": {
                "field": "continent",
                "type": "nominal",
                "legend": {
                  "title": "Continent"
                },
                "scale": {
                  "domain": ["North America", "South America", "Europe", "Africa", "Asia", "Oceania"],
                  "range": ["#76b7b2", "#f28e2b", "#4e79a7", "#9c755f", "#e15759", "#edc948"]
                }
              },
              "tooltip": [
                {"field": "continent", "title": "Continent"},
                {
                  "aggregate": "mean",
                  "field": "deaths",
                  "title": "Average Child Deaths",
                  "format": ",.2f"
                }
              ]
            }
          }
        ]
      },
      {
        "height": 200,
        "width": 1200,
        "mark": {
            "type": "area",
            "line": {
                "color": "darkgreen"
            },
            "color": {
                "x1": 1,
                "y1": 1,
                "x2": 1,
                "y2": 0,
                "gradient": "linear",
                "stops": [
                  {
                    "offset": 0,
                    "color": "white"
                  },
                  {
                    "offset": 1,
                    "color": "darkgreen"
                  }
                ]
            }
        },
        "transform": [
        ],
        "params": [
          {
            "name": "time_brush",
            "select": {"type": "interval", "encodings": ["x"]}
          }
        ],
        "encoding": {
          "x": {"field": "year", "type": "nominal", "title": "Year"},
          "y": {
            "aggregate": "mean",
            "field": "mortality_rate",
            "title": "Child Mortality Rate"
          },
          "tooltip": [
            {"field": "year", "title": "Year"},
            {
              "aggregate": "mean",
              "field": "mortality_rate",
              "title": "Child Mortality Rate",
              "format": ".2f"
            }
          ]
        }
      }
    ],
    "config": {
      "axis": {
        "labelFont": "Source Sans Pro, sans-serif",
        "labelAngle": 0,
        "labelColor": "black",
        "titleColor": "black",
        "gridColor": "lighter",
        "labelFontSize": 14,
        "labelLimit": 500
      },
      "padding": {"left": 5, "top": 5, "right": 5, "bottom": 5},
      "style": {
        "guide-title": {
          "font": "Source Sans Pro, sans-serif",
          "limit": 400,
          "fontSize": 15
        },
        "text": {
          "font": "Source Sans Pro, sans-serif",
          "fontWeight": "normal",
          "size": 14
        }
      },
      "legend": {
        "columns": 5,
        "labelLimit": 300,
        "labelFontSize": 16,
        "labelFont": "Source Sans Pro, sans-serif",
        "labelPadding": 4,
        "rowPadding": 6
      }
    }
  }